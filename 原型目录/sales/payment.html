<!DOCTYPE html>
<html>
	
	<!--应收冲款-->
	<head>
		<meta charset="UTF-8">
		<title></title>
	<link rel="stylesheet" type="text/css"
	href="../extjs/resources/css/ext-all-gray.css" />
<script type="text/javascript" src="../extjs/ext-all.js"></script>
<script type="text/javascript" src="../extjs/ext-lang-zh_CN.js"></script>
<script>
Ext.onReady(function(){
Ext.BLANK_IMAGE_URL = "../extjs/resources/themes/images/default/s.gif";
	  Ext.QuickTips.init();
	windowst.show();
	console.log(windowst)
	
	
});
var fielmenu=new Ext.menu.Menu({
		items:[{text:'载入单币别账款',handler:function(){
			afronction();
			
					}},{text:'载入多币别账款'},{text:'载入预算'}]
	});
	var fielmenu2=new Ext.menu.Menu({
		items:[{text:'以下冲款'},{text:'以下折让'},{text:'以下空白'}]
	});
	





var grids=Ext.create('Ext.grid.Panel',{
    
	 listeners:{
				containerdblclick: function(grid, e, eOpts){ //单击事件
	    						grid.getStore().add({'goodsNumber':'12','orderDate':'2018-06-05','orderNumber':'20180605','receiptNumber':'110',
	    						'buyer':'株洲建坤科技','buyerName':'株洲建坤科技','departmentNumber':'01',
	    						'departmentName':'直销部','wallah':'王直销','projectName':'销售一','Currency':'人民币','exchangeRate':'10%',
	    						'orderMoney':'5000','nowMoney':'10000','allowanceMoney':'1000','rushMoney':'1000','supportMoney':'1000'
	    						});
    						
    					},
					itemcontextmenu:function(){
					
    						e.preventDefault();
    						new Ext.menu.Menu({
    							items:[{
    								xtype: 'textfield',
    								text: 'Lost',
    								pressed: false,
    								handler:function(){
											alert();
										}
    							},{
    								xtype: '',
    								text: '11',
    								pressed: false,
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '11',
    								pressed: false,
    								menu:new Ext.menu.Menu({
    									items:[{
    										text:'11',
    										pressed: false
    									}]
    								}),
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '111',
    								pressed: false,
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '111',
    								pressed: false,
    								handler: function(){}
    							}]
    						}
    						
    						).showAt(e.getXY());
				}
			},plugins: [
        				Ext.create('Ext.grid.plugin.CellEditing', {
            				clicksToEdit: 1
        				})
    				],
	columns: [
				 {header: '（栏号）',
	                    		xtype: 'rownumberer',
	                    		dataIndex: 'lh', 
	                    		width: 60,
								sortable: false
        					},
					
        		{ header: '(单别)',  dataIndex: 'goodsNumber', width: 100,},
       			 { header: '（原单日期）', dataIndex: 'orderDate',width: 120,editor: { xtype:'textfield',
       			 
				 } },
       				 { header: '（原单单号）', dataIndex: 'orderNumber' },
					 { header: '（发票号码）', dataIndex: 'receiptNumber' },
					 { header: '（交易对象）', dataIndex: 'buyer'},
					 { header: '（交易对象名称）', dataIndex: 'buyerName' },
					 { header: '（部门编号）', dataIndex: 'departmentNumber' },
					 { header: '（部门名称）', dataIndex: 'departmentName' },
					 { header: '（业务人员）', dataIndex: 'wallah' },
					 { header: '（项目名称）', dataIndex: 'projectName' },
					 { header: '（币别）', dataIndex: 'Currency' },
					 { header: '（汇率）', dataIndex: 'exchangeRate' },
					 { header: '（原单金额）', dataIndex: 'orderMoney' },
					 { header: '（现行余额）', dataIndex: 'nowMoney' },
					 { header: '（折让金额）', dataIndex: 'allowanceMoney' },
					 { header: '（冲款金额）', dataIndex: 'rushMoney' },
					 { header: '（冲抵金额）', dataIndex: 'supportMoney' }
   					 ],
   			 height: 130,
			 width:1971,
			 autoScroll:false,
			 
})




var grids1=Ext.create('Ext.grid.Panel',{
    
	 listeners:{
				containerdblclick: function(grid, e, eOpts){ //单击事件
	    						grid.getStore().add({'accountsReceivable':'12', 'origin':'销售订单','originOrder':'20180605','receivableAdvance':'1000','departmentNumber':'1','departmentName':'直销部','useReceivableAdvance':'1000','sourceSummary':'sss'});
    						
    					},
					itemcontextmenu:function(){
					
    						e.preventDefault();
    						new Ext.menu.Menu({
    							items:[{
    								xtype: 'textfield',
    								text: 'Lost',
    								pressed: false,
    								handler:function(){
											alert();
										}
    							},{
    								xtype: '',
    								text: '11',
    								pressed: false,
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '11',
    								pressed: false,
    								menu:new Ext.menu.Menu({
    									items:[{
    										text:'11',
    										pressed: false
    									}]
    								}),
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '111',
    								pressed: false,
    								handler: function(){}
    							},{
    								xtype: '',
    								text: '111',
    								pressed: false,
    								handler: function(){}
    							}]
    						}
    						
    						).showAt(e.getXY());
				}
			},plugins: [
        				Ext.create('Ext.grid.plugin.CellEditing', {
            				clicksToEdit: 1
        				})
    				],
	columns: [
				 {header: '（应收冲款单账号）',
	                    		xtype: 'rownumberer',
	                    		dataIndex: 'accountsReceivable', 
	                    		width: 120,
								sortable: false
        					},
					
        		{ header: '（来源别）',  dataIndex: 'origin', width: 100,},
       			 { header: '（来源单号）', dataIndex: 'originOrder',width: 120,editor: { xtype:'textfield',
       			  enableKeyEvents:true,
				 	listeners:{
					//f4键盘事件
		              keyup:function(textField, e){
		
		                     if(e.getKey() == 115){
		
		                        windowsGoods.show();
		
		                     }
		              },
		              //悬浮提示
		            render: function (field, p) { 
					Ext.QuickTips.init(); 
					Ext.QuickTips.register({ 
					target: field.el, 
					text: 'F4' 
					}) 
				} 
		     }
				 } },
       				 { header: '（预收余款）', dataIndex: 'receivableAdvance' },
					 { header: '（部门编号）', dataIndex: 'departmentNumber' },
					 { header: '（部门名称）', dataIndex: 'departmentName'},
					 { header: '（取用预收金额）', dataIndex: 'useReceivableAdvance' },
					 { header: '（来源摘要）', dataIndex: 'sourceSummary' }
   					 ],
   			 height: 130,
			 width:871,
			 autoScroll:false,
			 
})



//内容
var filterPanel = Ext.create('Ext.panel.Panel', {
    bodyPadding: 6,  // 避免Panel中的子元素紧邻边框
    width: 1790,
	height:170,
    items:[grids],
	bbar: [{
						xtype: "label",
						text: '总计:',
						width: 90
				},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 0 0 800',
						value: '0.00'
					}
				],
});

//取用预算
var filterPanel1 = Ext.create('Ext.panel.Panel', {
    bodyPadding: 6,  // 避免Panel中的子元素紧邻边框
    width: 850,
	height:170,
    items:[grids1],
	bbar: [{
						xtype: "label",
						text: '总计:',
						width: 90
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 0 0 130',
						value: '0.00'
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 0 0 105',
						value: '0.00'
					}
				],
});



//收款冲款备注
var filterPanel2 = Ext.create('Ext.panel.Panel', {
    bodyPadding: 10, // 避免Panel中的子元素紧邻边框
    bodyMargin:10,
    width: 540,
	height:170,
	layout:"column",
	baseCls:'x-plain',
    items:[{
		xtype: 'textfield',
        name: 'Marker',
        fieldLabel: '自定义一',
		width:250,
		style:'margin-left:5px',
        labelWidth: 60,
        anchor: '100%',
			},
    {
    	xtype: 'textfield',
        name: 'Marker',
        style:'margin-left:5px',
        fieldLabel: '自定义二',
		width:250,
        labelWidth: 60,
        anchor: '100%',
    },
     {
    	xtype: 'textarea',
        name: 'Marker',
        style:'margin:30px',
        fieldLabel: '备注',
		width:480,
        labelWidth: 30,
        anchor: '100%',
    }
    ]
});



var items1=[{
					title: '内容',
					autoScroll: true,
					items: [filterPanel]
				}, {
					title: '取用预付',
					autoScroll: true,
					items: [filterPanel1]
				},{
					title: '备注',
					autoScroll:true,
					items:[filterPanel2]
				}];



var tableds = Ext.create('Ext.TabPanel', {
				width: "100%",
				height: 225,
				//autoScroll: true,
				bodyPadding: 5,
				items: items1,
				autoDestroy:false
			});


var formsg=Ext.create('Ext.form.Panel', {
    bodyPadding: 25,
	height:'100%',
	layout:"column",
	baseCls:'x-plain',
	items:[{
		xtype: 'textfield',
        name: 'ProdDepart',
		bodyPadding: 5,
        fieldLabel: '所属部门',
		width:250,
        labelWidth: 80,
        style:'color:blue;',
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsDepartment.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		xtype: 'textfield',
        name: 'Marker',
        fieldLabel: '制单人员',
		style:'margin-left:19px',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'Permitter',
        fieldLabel: '复核人员',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			}],
	});




var forms=Ext.create('Ext.form.Panel', {
    bodyPadding: 5,
	height:'100%',
	layout:"column",
	baseCls:'x-plain',
	items:[
	{
		xtype: 'textfield',
        name: 'Customer',
        fieldLabel: '客户',
		width:250,
        labelWidth: 80,
        style:'color:blue;',
		emptyText:'请输入客户',
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsBuyer.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		style:'margin-left:9px;color:blue',
		xtype: 'datefield',
        name: 'BillDate',
        fieldLabel: '单据日期',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'SettlementOne',
        fieldLabel: '结算方式一',
		width:170,
        labelWidth: 80,
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsBalance.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		xtype: 'textfield',
        name: 'dizhiton',
		width:79,
        labelWidth: 70,
		margin:"0 1",
        anchor: '100%',
			},{
			style:'margin-left:9px',
		 xtype: 'textfield',
        name: 'BillNo',
		style:"color:blue;margin-left:9px",
        fieldLabel: '单据号码',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'SettlementTwo',
        fieldLabel: '结算方式二',
		width:170,
        labelWidth: 80,
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsBalance.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		xtype: 'textfield',
        name: 'dizhiton',
		width:79,
        labelWidth: 70,
		margin:"0 1",
        anchor: '100%',
		},{
		style:'color:blue;margin-left:9px',
		xtype: 'textfield', //多行文本域
        name: 'MoneyStyle',
        fieldLabel: '币别',
        labelWidth: 80,
		width:250,
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsCurrency.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		xtype: 'textfield',
        name: 'SettlementThree',
        fieldLabel: '结算方式三',
		width:170,
        labelWidth: 80,
        anchor: '100%',
        enableKeyEvents:true,
        listeners:{
			//f4键盘事件
              keyup:function(textField, e){

                     if(e.getKey() == 115){

                        windowsBalance.show();

                     }
              },
              //悬浮提示
            render: function (field, p) { 
			Ext.QuickTips.init(); 
			Ext.QuickTips.register({ 
			target: field.el, 
			text: 'F4' 
			}) 
		} 

     }
	},{
		xtype: 'textfield',
        name: 'dizhiton',
		width:79,
        labelWidth: 70,
		margin:"0 1",
        anchor: '100%',
			},{
		style:'margin-left:9px',
		 xtype: 'textfield', //多行文本域
        name: 'huilv',
        fieldLabel: '汇率',
        labelWidth: 80,
		width:250,
        anchor: '100%',
			},{
		xtype: 'textfield',
        name: 'Ware',
        fieldLabel: '折扣率（%）',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			},{
		style:'margin-left:9px',
		xtype: 'datefield',
        name: 'endRece',
        fieldLabel: '终止月账',
		width:250,
        labelWidth: 80,
        anchor: '100%',
			},tableds,formsg]
});

//winform窗口
	var windowst=new  Ext.Window({
		width:640,
		height:570,
		title:"应收冲款单",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		anchor: '100%',
		minimizable: true, 
		maximizable:true, 
		items:[forms],
		bbar:[{xtype:"splitbutton",id:"gongneng",text:'功能',width:90,menu:fielmenu},
		{xtype:"splitbutton",id:"zdjs",text:'自动计算',width:90,menu:fielmenu2},
		],
	});
	
	//物料主文件
	var windowsGoods=new  Ext.Window({
		width:400,
		height:300,
		title:"物料选择",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide",
	});
	//客户主文件
	var windowsBuyer=new  Ext.Window({
		width:400,
		height:300,
		title:"单选-客户主文件设定",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide",
	});
	//账款结算方式
	var windowsBalance=new  Ext.Window({
		width:400,
		height:300,
		title:"单选-结算方式设定",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide",
	});
	//币别
	var windowsCurrency=new  Ext.Window({
		width:400,
		height:300,
		title:"单选-币别设定",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide",
	});
	
	//币别
	var windowsDepartment=new  Ext.Window({
		width:400,
		height:300,
		title:"单选-部门设定",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide",
	});
	function  afronction(){
		var song=Ext.encode(forms.getForm().getValues());
		Ext.Ajax.request(   
           	 {  
            //被用来向服务器发起请求默认的url  
           		 url : "",  
           	 //请求时发送后台的参数,既可以是Json对象，也可以直接使用“name = value”形式的字符串  
          		  params :[{}],  
            //请求时使用的默认的http方法  
            method : "post",  
            //请求成功时回调函数  
            success : function() {  
                Ext.ux.Toast.msg("信息提示", "成功删除所选记录！");  
            },  
            //请求失败时回调函数  
            failure : function() {  
                Ext.ux.Toast.msg("信息提示", "信息删除出错，请联系管理员!");  
            }  
        }  
    );  
				alert(song);// 序列化表单
	}
	
function fromstrn(){
	//alert(Ext.encode(forms.getForm().getValues())); 序列化表单
	
	//var record=grids.getSelectionModel().getLastSelected(); //获取选中的一行对象
	
	//	var clikd=grids.getSelectionModel().getSelected();//获取选中的一行
	
	//	var selecto=grids.getSelectionModel().getSelection(); //选中多行 返回数组
			//for(var i=0;i<selecto.length;i++){
			//	selecto[i].get('name');
			//}
			
	
	//var cout=grids.getStore().getCount(); //获取grid行数
	
	//var name=record.get('name');//获取值
	
	//for(var i=0;i<grids.store.data.length;i++){ 
		//var grit=grids.store.getAt(i).data; //获取全部值
		//	alert(grit.bianma);
		//}
//	}

	//var arr=[]; //序列化表格
			//var sni=grids.store.data;
			//sni.each(function(record){
			//arr.push(record.data);
			//})
			//alert(Ext.encode(arr));
			//}
	
  //grid.getSelectionModel().selectRow(0);//默认选中第一行
	
	//grid.getView().refresh(); //刷新表格
		
	//grids.store.removeAll();//移除全部数据
		
	//grids.store.removeAt(0); //删除指定的行
		
   //var selecto=grids.getSelectionModel().getSelection(); selecto.length>0是选中的 判断是否选中一行
		
  //var selecto=grids.getSelectionModel().getSelection();
		//var ston=grids.getStore(); 
		//var selectData=selecto[0];
		//var datainded=ston.indexOf(selectData);
		//grids.store.removeAt(datainded); //删除选中行
	
	
//	var mosld=grids.getSelectionModel().getLastSelected();
//		mosld.set('name',123); //修改选中的列
//		mosld.commit();

	}
</script>
</head>

<body>
</body>
</html>