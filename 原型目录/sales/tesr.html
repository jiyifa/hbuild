<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>物料主信息</title>
<link rel="stylesheet" type="text/css"
	href="../extjs/resources/css/ext-all.css" />
<script type="text/javascript" src="../extjs/ext-all.js"></script>
<script type="text/javascript" src="../extjs/ext-lang-zh_CN.js"></script>
<script src="../js/jquery-1.11.3.min.js"></script>
<script>
	Ext.onReady(function(){
		Ext.BLANK_IMAGE_URL = "extjs/resources/images/default/s.gif";
	    Ext.QuickTips.init();
		mainWindow.show();
		
});

	$(document).keydown(function(event){

　　　　
    if(event.keyCode==115){
    	
      var grids2 = Ext.create('Ext.grid.Panel', {
				
				plugins: [
					Ext.create('Ext.grid.plugin.CellEditing', {
						clicksToEdit: 1
					})
				],
				columns: [{
						header: '类别编号',
						xtype: 'rownumberer',
						dataIndex: 'lh',
						width:100
					},

					{
						header: '类别名称',
						dataIndex: 'name',
						width:100
					}
				],
				height: '100%',
				width: '100%'
			})
		var filterPanel = Ext.create('Ext.panel.Panel', {
				
				width: 218,
				height: 168,
				border:false,
				items: [grids2],
				bbar: [{
						xtype: "label",
						text: '总计:',
						width: 90
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 180',
						value: '0.00'
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0',
						value: '0.00'
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 40 0 30',
						value: '0.00'
					},
					{
						xtype: "textfield",
						disabled: true,
						width: 90,
						margin: '0 0 0 0',
						value: '0.00'
					}
				],
			});
			
		var grids = Ext.create('Ext.grid.Panel', {
				
				plugins: [
					Ext.create('Ext.grid.plugin.CellEditing', {
						clicksToEdit: 1
					})
				],
				columns: [{
						header: '',
						xtype: 'rownumberer',
						dataIndex: 'lh'
					},

					{
						header: '(---)',
						dataIndex: 'name',
						width:50
					}
				],
				height: 165,
				width: 130
			})
    Ext.create("Ext.window.Window",{  
        title:'单选--物料类别设定',  
        height:280,  
        width:380,  
        constrain:true,  
        modal:true,  
        plain:true,  
        autoScroll:true,      
        icon:'',  
        html:'',
        items:[{
        	layout:'column', 
        	labelSeparator:'：',
        	items:[{
        	xtype: 'combo',
       		name: 'photo',
			editable : false,
			queryMode: "local",
			triggerAction : 'all',
			displayField: "Name",
            valueField: "Value",
            store:['sad','sad'],
			width:110,
       		labelWidth: 50
        },{
        	xtype: 'numberfield',
        	value: 0,
        	minValue: 0,
       		width:60
        },{
        	 xtype:"checkbox",
        	 style:'margin-left:5px'
        },{
        	xtype:"displayfield",
        	fieldLabel: '寻找同时选取',
        	labelSeparator:''
        },{
        	layout: 'column',
        	border:false,
        	items:[{
        		
        	xtype: 'combo',
       		name: 'photo',
			editable : false,
			queryMode: "local",
			triggerAction : 'all',
			displayField: "Name",
            valueField: "Value",
            store:['sad','sad'],
			width:150
        },{
        	 xtype:"button",
        	 text:'查询',
        },{
        	xtype:"button",
        	text:'刷新'
        },{
        	xtype:"button",
        	width:60,
        	style:'margin-left:6px',
        	text:'取回'
        	}]
        },{
        	layout:"column",
        	border:false,
        	items:[{
        	xtype:"button",
        	width:60,
        	text:'全选'
        },{
        	xtype:"button",
        	width:60,
        	text:'全清'
        },{
        	xtype:"button",
        	width:60,
        	text:'以下全选'
        },{
        	xtype:"button",
        	width:60,
        	text:'以下全清'
        },{
        	xtype:"button",
        	width:60,
        	text:'新增记录',
        	handler:function(){
	         windowslb.show();
					}	
        },{
        	layout:"column",
        	border:false,
        	items:[grids,filterPanel]
        }]
        }]
        }]
        ,
        renderTo:Ext.getBody()  
    }).show();  
    }

　　});

var formpalcd=Ext.create('Ext.form.Panel', {
    	 bodyPadding: 5,
    width:'100%',
    // 将会通过 AJAX 请求提交到此URL
   // url: 'save-form.php',
    // 表单域 Fields 将被竖直排列, 占满整个宽度
    layout: 'column',
    defaults: {
        anchor: '100%'
    },

    // The fields
    defaultType: 'textfield',
    items: [{
			xtype: 'textfield',
       		name: 'supplierId',
			fieldLabel: '类别编号',
       		labelWidth: 80
         
			},{
		
		 xtype: 'textfield',
        name: 'accountBelong',
        fieldLabel: '类别名称',
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name:'supplierFullName',
        fieldLabel: '英文名称',
        labelWidth: 80,
        anchor: '100%',
			},{
			
		 xtype: 'textfield',
        name: 'genre',
        fieldLabel: '存货科目',
        labelWidth: 80,
		vtype:'url',//只能输入网址
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'supplierSimName',
        fieldLabel: '销售收入科目',
        labelWidth: 80,
        anchor: '100%',
			},{
		
		 xtype: 'textfield', //多行文本域
        name: 'area',
        fieldLabel: '销售成本科目',
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        fieldLabel: '发出商品科目',
		
        labelWidth: 80,
        anchor:'100%',
			},{
		xtype: 'textfield',
        
        fieldLabel: '赠品费用科目',
		
        labelWidth: 80,	
		anchor:'100%',		
				
			},{
	    xtype: 'textfield',
        fieldLabel: '其他收入科目',
		
        labelWidth: 80,		
		anchor:'100%',		
				
			},{
		 xtype: 'textfield',
        fieldLabel: '其他费用科目',
		
        labelWidth: 80,		
		anchor:'100%',		
			},{
		 xtype: 'textfield',
        fieldLabel: '其他成本科目',
		
        labelWidth: 80,		
		anchor:'100%',		
			},{
			xtype: 'textarea',
        fieldLabel: '备注',
		
        labelWidth: 80,		
		anchor:'100%',		
			}
			
    ]
    	
    	
    })




	var windowslb=new  Ext.Window({
		width:260,
		height:428,
		title:"物料选择",
		closable:true,
		items:[formpalcd],
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide"
	});

var formpalcd=Ext.create('Ext.form.Panel', {
    	 bodyPadding: 5,
    width:'100%',
    // 将会通过 AJAX 请求提交到此URL
   // url: 'save-form.php',
    // 表单域 Fields 将被竖直排列, 占满整个宽度
    layout: 'column',
    defaults: {
        anchor: '100%'
    },

    // The fields
    defaultType: 'textfield',
    items: [{
			xtype: 'textfield',
       		name: 'supplierId',
			fieldLabel: '类别编号',
       		labelWidth: 80
         
			},{
		
		 xtype: 'textfield',
        name: 'accountBelong',
        fieldLabel: '类别名称',
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name:'supplierFullName',
        fieldLabel: '英文名称',
        labelWidth: 80,
        anchor: '100%',
			},{
			
		 xtype: 'textfield',
        name: 'genre',
        fieldLabel: '存货科目',
        labelWidth: 80,
		vtype:'url',//只能输入网址
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'supplierSimName',
        fieldLabel: '销售收入科目',
        labelWidth: 80,
        anchor: '100%',
			},{
		
		 xtype: 'textfield', //多行文本域
        name: 'area',
        fieldLabel: '销售成本科目',
        labelWidth: 80,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        fieldLabel: '发出商品科目',
		
        labelWidth: 80,
        anchor:'100%',
			},{
		xtype: 'textfield',
        
        fieldLabel: '赠品费用科目',
		
        labelWidth: 80,	
		anchor:'100%',		
				
			},{
	    xtype: 'textfield',
        fieldLabel: '其他收入科目',
		
        labelWidth: 80,		
		anchor:'100%',		
				
			},{
		 xtype: 'textfield',
        fieldLabel: '其他费用科目',
		
        labelWidth: 80,		
		anchor:'100%',		
			},{
		 xtype: 'textfield',
        fieldLabel: '其他成本科目',
		
        labelWidth: 80,		
		anchor:'100%',		
			},{
			xtype: 'textarea',
        fieldLabel: '备注',
		
        labelWidth: 80,		
		anchor:'100%',		
			}
			
    ]
    	
    	
    })




	var windows2=new  Ext.Window({
		width:260,
		height:428,
		title:"物料选择",
		closable:true,
		items:[formpalcd],
		resizable:false, //设置是否可以改变大小
		draggable:true,
		closeAction:"hide"
	});



var fielmenu=new Ext.menu.Menu({
		items:[{text:'期初账款设定',handler:function(){
			fromaction();
		}},{text:'原产物料设定'}]
	});
	var fielmenu2=new Ext.menu.Menu({
		items:[{text:'上网'},{text:'写信'},{text:'历史交易查询'},{text:'帐额数据效验'}]
	});


var grids=Ext.create('Ext.grid.Panel',{
	 listeners:{
						containerdblclick: function(grid, e, eOpts){ //单击事件
	    						grid.getStore().add({'name':'', 'dizhi':'','bianma':'','lianxi':''});
    						
    					}
				
			},plugins: [
        				Ext.create('Ext.grid.plugin.CellEditing', {
            				clicksToEdit: 1
        				})
    				],
	columns: [
				 {header: '仓库编号',
	                    		xtype: 'rownumberer',
	                    		dataIndex: 'lh', 
	                    		width: 60,
								sortable: false
        					},
					
        		{ header: '仓库名称',  dataIndex: 'name',editor: { xtype:'textfield'}},
       			{ header: '期初存量', dataIndex: 'dizhi', flex: 1,editor: { xtype:'textfield'}},
       				  { header: '现有数量', dataIndex: 'bianma',editor: { xtype:'textfield'} },
					
   					 ],
   			 height: 130,
			 width:'100%',
			 autoScroll:false,
			 
});
	

var formpalcd=Ext.create('Ext.form.Panel', { //表单
    bodyPadding: 5,
    width:'100%',
    // 将会通过 AJAX 请求提交到此URL
   // url: 'save-form.php',
    // 表单域 Fields 将被竖直排列, 占满整个宽度
    layout: 'column',
    defaults: {
        anchor: '100%'
    },

    // The fields
    defaultType: 'textfield',
    items: [{
			xtype: 'textfield',
       		name: 'supplierId',
			fieldLabel: '物料编号',
       		labelWidth: 70,
       		listeners: {
								render: function(field) {
									Ext.QuickTips.init();
									Ext.QuickTips.register({
										target: field.el,
										text: '按F4选择客户'
									})
								}
								}
         
			},{
		style:'margin-left:9px',
		 xtype: 'textfield',
        name: 'accountBelong',
        fieldLabel: '物料类别',
        labelWidth: 70,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name:'supplierFullName',
        fieldLabel: '物料名称',
        labelWidth: 70,
        anchor: '100%',
			},{
			style:'margin-left:9px',
		 xtype: 'textfield',
        name: 'genre',
        fieldLabel: '规格型号',
        labelWidth: 70,
		vtype:'url',//只能输入网址
        anchor: '100%',
			},{
		 xtype: 'textfield',
        name: 'supplierSimName',
        fieldLabel: '条形码编号',
        labelWidth: 70,
		regex:/^[\u4E00-\u9FA5]+$/,//自定义正则表达式,(只能输入汉字);
		regexText:'叫你输入汉字啊,SB吗？',//提示
        anchor: '100%',
			},{
			style:'margin-left:9px',
		 xtype: 'textfield', //多行文本域
        name: 'area',
        fieldLabel: '英文品名',
        labelWidth: 70,
        anchor: '100%',
			},{
		 xtype: 'textfield',
        fieldLabel: '计量单位',
		regex:/^[A-Za-z]+$/,//自定义正则表达式,(只能输入汉字);
		regexText:'叫你输入英文列啊,SB吗？',//提示
        labelWidth: 70,
       
			},{
				xtype:"tabpanel",
				width:'100%',
				height:'220px',
				items:[{
					title:'基本资料',
					bodyPadding: 5,
						layout:"column",
					items:[{
				xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '建议售价',
       			labelWidth: 70
			},{
			xtype: 'textfield',
       		name: 'purchaseName',
			fieldLabel: '使用币别',
			style:'margin-left:19px',
       		labelWidth: 70
			},{
			xtype: 'textfield',
       		name: 'linkMan',
			fieldLabel: '售价A',
       		labelWidth: 70
			},{
			fieldLabel:'物料形态',
					xtype:'combo',
	             	name: 'guowaimaoyi',
					style:"margin-left:9px",
	             	displayField: 'name',
					labelWidth:70,
					width:230,
					 margin:"5 18",
    				valueField: 'abbr',
					store: Ext.create('Ext.data.Store', {
						fields: ['abbr', 'name'],
    					data : [
        					{"abbr":"采购件", "name":"采购件"},
        					{"abbr":"半成品", "name":"半成品"},
        					{"abbr":"组合品", "name":"组合品"},
        					{"abbr":"非库存品", "name":"非库存品"},
        					{"abbr":"易耗品", "name":"易耗品"},
							
					   ]
					}),
					value: '采购件',
        			typeAhead: true,
        			mode: 'local',
        			triggerAction: 'all',
        			selectOnFocus:true,
			},
			{
			xtype: 'textfield',
       		name: 'telephoneone',
			fieldLabel: '售价B',
       		labelWidth: 70
			},{
			        fieldLabel: '是否含税',
					xtype:'combo',
	             	name: 'IncludeRate',
	             	displayField: 'name',
					labelWidth:70,
					width:230,
					 margin:"5 18",
    				valueField: 'abbr',
					store: Ext.create('Ext.data.Store', {
						fields: ['abbr', 'name'],
    					data : [
        					{"abbr":"含税", "name":"含税"},
        					{"abbr":"未税", "name":"未税"}
							
					   ]
					}),
					value: '含税',
        			typeAhead: true,
        			mode: 'local',
        			triggerAction: 'all',
        			selectOnFocus:true,
			},{
			xtype: 'textfield',
			fieldLabel: '售价C',
       		labelWidth: 70
			},{
			xtype: 'textfield',
			fieldLabel: '税目',
			style:'margin-left:19px',
       		labelWidth: 70
			},{
			xtype: 'textfield',
			fieldLabel: '主供应商',
       		labelWidth: 70
			},{
			xtype: 'textfield',
			fieldLabel: '税率',
			style:'margin-left:19px',
       		labelWidth: 70
			},{
				xtype: 'textfield',
			fieldLabel: '标准进价',
			
       		labelWidth: 70
			},{
			xtype: 'textfield',
			fieldLabel: '采购提前期',
			style:'margin-left:19px',
       		labelWidth: 70
			
			
			}]
				},{
				title:"库存总信息",
				bodyPadding: 5,
				style:'padding-top:5px',
				
				bodyPadding: 5,
						layout:"column",
				items:[
				{
					xtype:'label',
					text:'额度设定',
					style:'border-bottom:1px solid blue;color:#350257;',
				},{
					xtype:'label',
					text:'账款信息',
					margin:'0 190',
					style:'border-bottom:1px solid blue;color:#350257;',
			   }, {
				xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '安全存量',
       			labelWidth: 70
			},{
			xtype: 'textfield',
       		name: 'purchaseName',
			fieldLabel: '低于安全存量',
			style:'margin-left:19px',
       		labelWidth: 80
			},{
			xtype: 'textfield',
       		name: 'linkMan',
			fieldLabel: '起初总数量',
       		labelWidth: 70
			},{
				xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '现有总数量',
       			labelWidth: 80,
       			style:'margin-left:19px',
			},{
				xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '平均成本',
       			labelWidth: 70,
       			
       		},{
       			xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '现有平均成本',
       			labelWidth: 80,
       			style:'margin-left:19px',
       		},{
       			
       			xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '标准成本',
       			labelWidth: 70,
       			
       		},{
       			xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '标准总成本',
       			labelWidth: 80,
       			style:'margin-left:19px',
       		},{
       			xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '期初总成本',
       			labelWidth: 70,
       		},{
       			xtype: 'textfield',
				width:'120',
       			name: 'responsible',
				fieldLabel: '现行总成本',
       			labelWidth: 80,
       			style:'margin-left:19px',
       		}
	             
			
				]
				
			},{
				title:"交易资料",
				bodyPadding: 5,
				layout:"column",
				height:'200px',
				items:[{
					xtype:'label',
					text:'期初设定',
					style:'border-bottom:1px solid blue;color:#350257;',
				},{
					xtype:'label',
					text:'当前信息',
					margin:'0 190',
					style:'border-bottom:1px solid blue;color:#350257;',
				},
				{
				xtype: 'datefield',
				width:'120',
       			name: 'amountQuota',
				margin:"2",
				fieldLabel: '最初出库日',
       			labelWidth: 70
			},{
				xtype: 'datefield',
				width:'120',
       			name: 'startAdvRecv',
				margin:"2",
				fieldLabel: '最近出库日',
       			labelWidth: 80
			},{
				xtype: 'datefield',
				width:'120',
       			name: 'remainQuota',
				margin:"30 2 2",
				fieldLabel: '最初入库日',
       			labelWidth: 70
			},{
				xtype: 'datefield',
				width:'120',
       			name: 'startReceivable',
				margin:"30 2 2",
				fieldLabel: '最近出库日',
       			labelWidth: 80
			},{
				xtype: 'textfield',
				width:'120',
			    margin:"30 2 2",
				fieldLabel: '呆滞天数',
       			labelWidth: 70
			},{
				xtype: 'datefield',
				width:'120',
       			name: 'cuReceiRecv',
	            margin:"30 2 2",
				fieldLabel: '停用日期',
       			labelWidth: 80
			}
			     ]
		      },{
				title:"库存明细",
				items:grids,
			},{
				title:"物料描述",
				height:200,
				bodyPadding: 15,
				items:[{
     		   	xtype     : 'textarea',
				name:'meMo',
       		    fieldLabel: '物料说明',
				width:400, 
				labelWidth: 60,
				height:'100%'
				}]
			}]
		}]
});



var mainWindow = new Ext.Window({
		
		width:530,
		height:428,
		title:"物料主文件",
		closable:true,
		resizable:false, //设置是否可以改变大小
		draggable:true, //设
		items:[formpalcd],
		bbar:[{xtype:"splitbutton",text:'设定',width:90,menu:fielmenu},{xtype:"splitbutton",text:'功能',width:90,menu:fielmenu2}],
	});

function fromaction(){
	alert(Ext.encode(formpalcd.getForm().getValues()));// 序列化表单
}

　
</script>
</head>

<body>
</body>
</html>
